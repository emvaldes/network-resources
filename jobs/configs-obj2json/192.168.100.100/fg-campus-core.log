+ oIFS=' 	
'
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --search=192.168.100.100
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ search =~ ^(search|s)$ ]]
+ local target_pattern=192.168.100.100
+ [[ search =~ ^(source|o)$ ]]
+ [[ search =~ ^(target|t)$ ]]
+ [[ search =~ ^(logger|l)$ ]]
+ [[ search == \d\e\b\u\g ]]
+ [[ search == \d\r\y\-\r\u\n ]]
+ [[ search == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e '--source=config system interface--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  edit "wifi"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set ip 192.168.100.100 255.255.255.0--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set alias "Wireless VLAN"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  next--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--end'
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ source =~ ^(search|s)$ ]]
+ [[ source =~ ^(source|o)$ ]]
+ local 'source_object=config system interface--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  edit "wifi"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set ip 192.168.100.100 255.255.255.0--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set alias "Wireless VLAN"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  next--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--end'
+ [[ source =~ ^(target|t)$ ]]
+ [[ source =~ ^(logger|l)$ ]]
+ [[ source == \d\e\b\u\g ]]
+ [[ source == \d\r\y\-\r\u\n ]]
+ [[ source == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --target=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ target =~ ^(search|s)$ ]]
+ [[ target =~ ^(source|o)$ ]]
+ [[ target =~ ^(target|t)$ ]]
+ local target_object=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
+ [[ target =~ ^(logger|l)$ ]]
+ [[ target == \d\e\b\u\g ]]
+ [[ target == \d\r\y\-\r\u\n ]]
+ [[ target == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --logger=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--192.168.100.100--fortinet--fg-campus-core.console
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ logger =~ ^(search|s)$ ]]
+ [[ logger =~ ^(source|o)$ ]]
+ [[ logger =~ ^(target|t)$ ]]
+ [[ logger =~ ^(logger|l)$ ]]
+ local target_console=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--192.168.100.100--fortinet--fg-campus-core.console
+ [[ logger == \d\e\b\u\g ]]
+ [[ logger == \d\r\y\-\r\u\n ]]
+ [[ logger == \v\e\r\b\o\s\e ]]
+ IFS=' 	
'
+ [[ -z true ]]
+ [[ -z false ]]
+ [[ -z true ]]
+ local target_console=console/configs-obj2json.console
+ mapfile -t restored_block
++ printf '%s\n' 'config system interface
  edit "wifi"
   set ip 192.168.100.100 255.255.255.0
   set alias "Wireless VLAN"
  next
end'
+ local 'object_header=config system interface'
+ local object_keyword type_value partner_value
+ read -a header_tokens
+ object_keyword=config
+ [[ config == \c\o\n\f\i\g ]]
++ printf '%s ' system interface
++ sed 's/[[:space:]]*$//'
+ type_value='system interface'
+ partner_value=false
+ data_sets=()
+ local -a data_sets
+ local description_value=false
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=config system interface'
+ [[ -z config system interface ]]
+ [[ config system interface =~ ^description[[:space:]] ]]
+ [[ config system interface =~ ^edit[[:space:]]+".+" ]]
+ [[ config system interface =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ config system interface == \n\e\x\t ]]
+ [[ config system interface == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=edit "wifi"'
+ [[ -z edit "wifi" ]]
+ [[ edit "wifi" =~ ^description[[:space:]] ]]
+ [[ edit "wifi" =~ ^edit[[:space:]]+".+" ]]
++ sed -E 's/^edit[[:space:]]+"(.+)"$/\1/'
+ partner_value=wifi
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=set ip 192.168.100.100 255.255.255.0'
+ [[ -z set ip 192.168.100.100 255.255.255.0 ]]
+ [[ set ip 192.168.100.100 255.255.255.0 =~ ^description[[:space:]] ]]
+ [[ set ip 192.168.100.100 255.255.255.0 =~ ^edit[[:space:]]+".+" ]]
+ [[ set ip 192.168.100.100 255.255.255.0 =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ set ip 192.168.100.100 255.255.255.0 == \n\e\x\t ]]
+ [[ set ip 192.168.100.100 255.255.255.0 == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=set alias "Wireless VLAN"'
+ [[ -z set alias "Wireless VLAN" ]]
+ [[ set alias "wireless vlan" =~ ^description[[:space:]] ]]
+ [[ set alias "wireless vlan" =~ ^edit[[:space:]]+".+" ]]
+ [[ set alias "wireless vlan" =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ set alias "wireless vlan" == \n\e\x\t ]]
+ [[ set alias "wireless vlan" == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local trimmed=next
+ [[ -z next ]]
+ [[ next =~ ^description[[:space:]] ]]
+ [[ next =~ ^edit[[:space:]]+".+" ]]
+ [[ next =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ next == \n\e\x\t ]]
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local trimmed=end
+ [[ -z end ]]
+ [[ end =~ ^description[[:space:]] ]]
+ [[ end =~ ^edit[[:space:]]+".+" ]]
+ [[ end =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ end == \n\e\x\t ]]
+ [[ end == \e\n\d ]]
+ continue
+ [[ config system interface == \c\o\n\f\i\g\ \s\y\s\t\e\m\ \i\n\t\e\r\f\a\c\e ]]
+ data_sets=("${data_sets[@]:1}")
+ items=()
+ local -a items
+ others=()
+ local -a others
+ for line in "${data_sets[@]}"
+ grep -Eq '(^|[^0-9.])192\.168\.100\.100([^0-9.]|$)'
+ items+=("$(sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//' <<< "${line}")")
++ sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//'
+ for line in "${data_sets[@]}"
+ grep -Eq '(^|[^0-9.])192\.168\.100\.100([^0-9.]|$)'
+ others+=("$(sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//' <<< "${line}")")
++ sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//'
++ printf '%s\n' 'set ip 192.168.100.100 255.255.255.0'
++ jq -R .
++ jq --slurp .
+ local 'items_json=[
  "set ip 192.168.100.100 255.255.255.0"
]'
++ printf '%s\n' 'set alias "Wireless VLAN"'
++ sed '/^[[:space:]]*$/d'
++ jq -R .
++ jq --slurp .
+ local 'others_json=[
  "set alias \"Wireless VLAN\""
]'
+ local group_value=Unclassified
+ [[ true == true ]]
+ local object_key
++ awk '{print $NF}'
++ sed -E 's/[[:punct:]]*$//'
+ object_key=interface
++ jq -r --arg key interface 'map( select( .match[]? | contains( $key ) ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
++ jq -r --arg desc false 'map( select( .match[]? == $desc ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
+ group_value=Unclassified
++ jq -n --arg object config --arg type 'system interface' --arg partner wifi --arg description false --argjson items '[
  "set ip 192.168.100.100 255.255.255.0"
]' --argjson others '[
  "set alias \"Wireless VLAN\""
]' --arg group Unclassified '{
          object: $object,
          type: ( $type // false ),
          partner: ( $partner | select(. != "" and . != "null" and . != "false") // false ),
          description: ( $description | select(. != "" and . != "null" and . != "false") // false ),
          items: $items,
          others: $others,
          group: $group
        }'
+ local 'target_json={
  "object": "config",
  "type": "system interface",
  "partner": "wifi",
  "description": false,
  "items": [
    "set ip 192.168.100.100 255.255.255.0"
  ],
  "others": [
    "set alias \"Wireless VLAN\""
  ],
  "group": "Unclassified"
}'
+ [[ true == true ]]
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ for object in "${restored_block[@]}"
+ message 'config system interface'
+ [[ -n config system interface ]]
+ local 'message=config system interface'
+ echo -e 'config system interface'
+ for object in "${restored_block[@]}"
+ message '  edit "wifi"'
+ [[ -n   edit "wifi" ]]
+ local 'message=  edit "wifi"'
+ echo -e '  edit "wifi"'
+ for object in "${restored_block[@]}"
+ message '   set ip 192.168.100.100 255.255.255.0'
+ [[ -n    set ip 192.168.100.100 255.255.255.0 ]]
+ local 'message=   set ip 192.168.100.100 255.255.255.0'
+ echo -e '   set ip 192.168.100.100 255.255.255.0'
+ for object in "${restored_block[@]}"
+ message '   set alias "Wireless VLAN"'
+ [[ -n    set alias "Wireless VLAN" ]]
+ local 'message=   set alias "Wireless VLAN"'
+ echo -e '   set alias "Wireless VLAN"'
+ for object in "${restored_block[@]}"
+ message '  next'
+ [[ -n   next ]]
+ local 'message=  next'
+ echo -e '  next'
+ for object in "${restored_block[@]}"
+ message end
+ [[ -n end ]]
+ local message=end
+ echo -e end
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ message 'JSON Object (output):'
+ [[ -n JSON Object (output): ]]
+ local 'message=JSON Object (output):'
+ echo -e 'JSON Object (output):'
+ jq -r .
+ [[ -n {
  "object": "config",
  "type": "system interface",
  "partner": "wifi",
  "description": false,
  "items": [
    "set ip 192.168.100.100 255.255.255.0"
  ],
  "others": [
    "set alias \"Wireless VLAN\""
  ],
  "group": "Unclassified"
} ]]
+ jq -r .
+ cat -n /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
     1	{
     2	  "object": "config",
     3	  "type": "firewall address",
     4	  "partner": "Vision-Link",
     5	  "description": "Vision’s quantum channel",
     6	  "items": [
     7	    "set subnet 192.168.2.12 255.255.255.255"
     8	  ],
     9	  "others": [],
    10	  "group": "Unclassified"
    11	}
    12	{
    13	  "object": "config",
    14	  "type": "firewall address",
    15	  "partner": "Cap-HQ",
    16	  "description": "Captain America’s secure endpoint",
    17	  "items": [
    18	    "set subnet 192.168.1.11 255.255.255.255"
    19	  ],
    20	  "others": [],
    21	  "group": "Unclassified"
    22	}
    23	{
    24	  "object": "config",
    25	  "type": "system interface",
    26	  "partner": "wifi",
    27	  "description": false,
    28	  "items": [
    29	    "set ip 192.168.100.100 255.255.255.0"
    30	  ],
    31	  "others": [
    32	    "set alias \"Wireless VLAN\""
    33	  ],
    34	  "group": "Unclassified"
    35	}
+ return 0
+ oIFS=' 	
'
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --search=192.168.100.100
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ search =~ ^(search|s)$ ]]
+ local target_pattern=192.168.100.100
+ [[ search =~ ^(source|o)$ ]]
+ [[ search =~ ^(target|t)$ ]]
+ [[ search =~ ^(logger|l)$ ]]
+ [[ search == \d\e\b\u\g ]]
+ [[ search == \d\r\y\-\r\u\n ]]
+ [[ search == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e '--source=config firewall address--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  edit "Titan-WLAN-Host"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set subnet 192.168.100.100 255.255.255.255--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set comment "Guest WiFi node"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  next--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--end'
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ source =~ ^(search|s)$ ]]
+ [[ source =~ ^(source|o)$ ]]
+ local 'source_object=config firewall address--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  edit "Titan-WLAN-Host"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set subnet 192.168.100.100 255.255.255.255--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set comment "Guest WiFi node"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  next--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--end'
+ [[ source =~ ^(target|t)$ ]]
+ [[ source =~ ^(logger|l)$ ]]
+ [[ source == \d\e\b\u\g ]]
+ [[ source == \d\r\y\-\r\u\n ]]
+ [[ source == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --target=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ target =~ ^(search|s)$ ]]
+ [[ target =~ ^(source|o)$ ]]
+ [[ target =~ ^(target|t)$ ]]
+ local target_object=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
+ [[ target =~ ^(logger|l)$ ]]
+ [[ target == \d\e\b\u\g ]]
+ [[ target == \d\r\y\-\r\u\n ]]
+ [[ target == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --logger=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--192.168.100.100--fortinet--fg-campus-core.console
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ logger =~ ^(search|s)$ ]]
+ [[ logger =~ ^(source|o)$ ]]
+ [[ logger =~ ^(target|t)$ ]]
+ [[ logger =~ ^(logger|l)$ ]]
+ local target_console=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--192.168.100.100--fortinet--fg-campus-core.console
+ [[ logger == \d\e\b\u\g ]]
+ [[ logger == \d\r\y\-\r\u\n ]]
+ [[ logger == \v\e\r\b\o\s\e ]]
+ IFS=' 	
'
+ [[ -z true ]]
+ [[ -z false ]]
+ [[ -z true ]]
+ local target_console=console/configs-obj2json.console
+ mapfile -t restored_block
++ printf '%s\n' 'config firewall address
  edit "Titan-WLAN-Host"
   set subnet 192.168.100.100 255.255.255.255
   set comment "Guest WiFi node"
  next
end'
+ local 'object_header=config firewall address'
+ local object_keyword type_value partner_value
+ read -a header_tokens
+ object_keyword=config
+ [[ config == \c\o\n\f\i\g ]]
++ printf '%s ' firewall address
++ sed 's/[[:space:]]*$//'
+ type_value='firewall address'
+ partner_value=false
+ data_sets=()
+ local -a data_sets
+ local description_value=false
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=config firewall address'
+ [[ -z config firewall address ]]
+ [[ config firewall address =~ ^description[[:space:]] ]]
+ [[ config firewall address =~ ^edit[[:space:]]+".+" ]]
+ [[ config firewall address =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ config firewall address == \n\e\x\t ]]
+ [[ config firewall address == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=edit "Titan-WLAN-Host"'
+ [[ -z edit "Titan-WLAN-Host" ]]
+ [[ edit "titan-wlan-host" =~ ^description[[:space:]] ]]
+ [[ edit "titan-wlan-host" =~ ^edit[[:space:]]+".+" ]]
++ sed -E 's/^edit[[:space:]]+"(.+)"$/\1/'
+ partner_value=Titan-WLAN-Host
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=set subnet 192.168.100.100 255.255.255.255'
+ [[ -z set subnet 192.168.100.100 255.255.255.255 ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 =~ ^description[[:space:]] ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 =~ ^edit[[:space:]]+".+" ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 == \n\e\x\t ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=set comment "Guest WiFi node"'
+ [[ -z set comment "Guest WiFi node" ]]
+ [[ set comment "guest wifi node" =~ ^description[[:space:]] ]]
+ [[ set comment "guest wifi node" =~ ^edit[[:space:]]+".+" ]]
+ [[ set comment "guest wifi node" =~ ^set[[:space:]]+comment[[:space:]] ]]
++ sed -E 's/^set[[:space:]]+comment[[:space:]]+//'
++ sed -E 's/^"(.*)"$/\1/'
+ description_value='Guest WiFi node'
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local trimmed=next
+ [[ -z next ]]
+ [[ next =~ ^description[[:space:]] ]]
+ [[ next =~ ^edit[[:space:]]+".+" ]]
+ [[ next =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ next == \n\e\x\t ]]
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local trimmed=end
+ [[ -z end ]]
+ [[ end =~ ^description[[:space:]] ]]
+ [[ end =~ ^edit[[:space:]]+".+" ]]
+ [[ end =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ end == \n\e\x\t ]]
+ [[ end == \e\n\d ]]
+ continue
+ [[ config firewall address == \c\o\n\f\i\g\ \f\i\r\e\w\a\l\l\ \a\d\d\r\e\s\s ]]
+ data_sets=("${data_sets[@]:1}")
+ items=()
+ local -a items
+ others=()
+ local -a others
+ for line in "${data_sets[@]}"
+ grep -Eq '(^|[^0-9.])192\.168\.100\.100([^0-9.]|$)'
+ items+=("$(sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//' <<< "${line}")")
++ sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//'
++ printf '%s\n' 'set subnet 192.168.100.100 255.255.255.255'
++ jq -R .
++ jq --slurp .
+ local 'items_json=[
  "set subnet 192.168.100.100 255.255.255.255"
]'
++ printf '%s\n'
++ sed '/^[[:space:]]*$/d'
++ jq -R .
++ jq --slurp .
+ local 'others_json=[]'
+ local group_value=Unclassified
+ [[ true == true ]]
+ local object_key
++ awk '{print $NF}'
++ sed -E 's/[[:punct:]]*$//'
+ object_key=address
++ jq -r --arg key address 'map( select( .match[]? | contains( $key ) ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
++ jq -r --arg desc 'Guest WiFi node' 'map( select( .match[]? == $desc ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
+ group_value=Unclassified
++ jq -n --arg object config --arg type 'firewall address' --arg partner Titan-WLAN-Host --arg description 'Guest WiFi node' --argjson items '[
  "set subnet 192.168.100.100 255.255.255.255"
]' --argjson others '[]' --arg group Unclassified '{
          object: $object,
          type: ( $type // false ),
          partner: ( $partner | select(. != "" and . != "null" and . != "false") // false ),
          description: ( $description | select(. != "" and . != "null" and . != "false") // false ),
          items: $items,
          others: $others,
          group: $group
        }'
+ local 'target_json={
  "object": "config",
  "type": "firewall address",
  "partner": "Titan-WLAN-Host",
  "description": "Guest WiFi node",
  "items": [
    "set subnet 192.168.100.100 255.255.255.255"
  ],
  "others": [],
  "group": "Unclassified"
}'
+ [[ true == true ]]
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ for object in "${restored_block[@]}"
+ message 'config firewall address'
+ [[ -n config firewall address ]]
+ local 'message=config firewall address'
+ echo -e 'config firewall address'
+ for object in "${restored_block[@]}"
+ message '  edit "Titan-WLAN-Host"'
+ [[ -n   edit "Titan-WLAN-Host" ]]
+ local 'message=  edit "Titan-WLAN-Host"'
+ echo -e '  edit "Titan-WLAN-Host"'
+ for object in "${restored_block[@]}"
+ message '   set subnet 192.168.100.100 255.255.255.255'
+ [[ -n    set subnet 192.168.100.100 255.255.255.255 ]]
+ local 'message=   set subnet 192.168.100.100 255.255.255.255'
+ echo -e '   set subnet 192.168.100.100 255.255.255.255'
+ for object in "${restored_block[@]}"
+ message '   set comment "Guest WiFi node"'
+ [[ -n    set comment "Guest WiFi node" ]]
+ local 'message=   set comment "Guest WiFi node"'
+ echo -e '   set comment "Guest WiFi node"'
+ for object in "${restored_block[@]}"
+ message '  next'
+ [[ -n   next ]]
+ local 'message=  next'
+ echo -e '  next'
+ for object in "${restored_block[@]}"
+ message end
+ [[ -n end ]]
+ local message=end
+ echo -e end
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ message 'JSON Object (output):'
+ [[ -n JSON Object (output): ]]
+ local 'message=JSON Object (output):'
+ echo -e 'JSON Object (output):'
+ jq -r .
+ [[ -n {
  "object": "config",
  "type": "firewall address",
  "partner": "Titan-WLAN-Host",
  "description": "Guest WiFi node",
  "items": [
    "set subnet 192.168.100.100 255.255.255.255"
  ],
  "others": [],
  "group": "Unclassified"
} ]]
+ jq -r .
+ cat -n /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
     1	{
     2	  "object": "config",
     3	  "type": "firewall address",
     4	  "partner": "Vision-Link",
     5	  "description": "Vision’s quantum channel",
     6	  "items": [
     7	    "set subnet 192.168.2.12 255.255.255.255"
     8	  ],
     9	  "others": [],
    10	  "group": "Unclassified"
    11	}
    12	{
    13	  "object": "config",
    14	  "type": "firewall address",
    15	  "partner": "Cap-HQ",
    16	  "description": "Captain America’s secure endpoint",
    17	  "items": [
    18	    "set subnet 192.168.1.11 255.255.255.255"
    19	  ],
    20	  "others": [],
    21	  "group": "Unclassified"
    22	}
    23	{
    24	  "object": "config",
    25	  "type": "system interface",
    26	  "partner": "wifi",
    27	  "description": false,
    28	  "items": [
    29	    "set ip 192.168.100.100 255.255.255.0"
    30	  ],
    31	  "others": [
    32	    "set alias \"Wireless VLAN\""
    33	  ],
    34	  "group": "Unclassified"
    35	}
    36	{
    37	  "object": "config",
    38	  "type": "firewall address",
    39	  "partner": "Titan-WLAN-Host",
    40	  "description": "Guest WiFi node",
    41	  "items": [
    42	    "set subnet 192.168.100.100 255.255.255.255"
    43	  ],
    44	  "others": [],
    45	  "group": "Unclassified"
    46	}
+ return 0
+ oIFS=' 	
'
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --search=192.168.100.100
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ search =~ ^(search|s)$ ]]
+ local target_pattern=192.168.100.100
+ [[ search =~ ^(source|o)$ ]]
+ [[ search =~ ^(target|t)$ ]]
+ [[ search =~ ^(logger|l)$ ]]
+ [[ search == \d\e\b\u\g ]]
+ [[ search == \d\r\y\-\r\u\n ]]
+ [[ search == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e '--source=config firewall address--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  edit "Wanda-Field"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set subnet 192.168.100.100 255.255.255.255--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set comment "Wanda’s chaos relay"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  next--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--end'
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ source =~ ^(search|s)$ ]]
+ [[ source =~ ^(source|o)$ ]]
+ local 'source_object=config firewall address--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  edit "Wanda-Field"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set subnet 192.168.100.100 255.255.255.255--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--   set comment "Wanda’s chaos relay"--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  next--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--end'
+ [[ source =~ ^(target|t)$ ]]
+ [[ source =~ ^(logger|l)$ ]]
+ [[ source == \d\e\b\u\g ]]
+ [[ source == \d\r\y\-\r\u\n ]]
+ [[ source == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --target=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ target =~ ^(search|s)$ ]]
+ [[ target =~ ^(source|o)$ ]]
+ [[ target =~ ^(target|t)$ ]]
+ local target_object=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
+ [[ target =~ ^(logger|l)$ ]]
+ [[ target == \d\e\b\u\g ]]
+ [[ target == \d\r\y\-\r\u\n ]]
+ [[ target == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --logger=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--192.168.100.100--fortinet--fg-campus-core.console
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ logger =~ ^(search|s)$ ]]
+ [[ logger =~ ^(source|o)$ ]]
+ [[ logger =~ ^(target|t)$ ]]
+ [[ logger =~ ^(logger|l)$ ]]
+ local target_console=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--192.168.100.100--fortinet--fg-campus-core.console
+ [[ logger == \d\e\b\u\g ]]
+ [[ logger == \d\r\y\-\r\u\n ]]
+ [[ logger == \v\e\r\b\o\s\e ]]
+ IFS=' 	
'
+ [[ -z true ]]
+ [[ -z false ]]
+ [[ -z true ]]
+ local target_console=console/configs-obj2json.console
+ mapfile -t restored_block
++ printf '%s\n' 'config firewall address
  edit "Wanda-Field"
   set subnet 192.168.100.100 255.255.255.255
   set comment "Wanda’s chaos relay"
  next
end'
+ local 'object_header=config firewall address'
+ local object_keyword type_value partner_value
+ read -a header_tokens
+ object_keyword=config
+ [[ config == \c\o\n\f\i\g ]]
++ printf '%s ' firewall address
++ sed 's/[[:space:]]*$//'
+ type_value='firewall address'
+ partner_value=false
+ data_sets=()
+ local -a data_sets
+ local description_value=false
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=config firewall address'
+ [[ -z config firewall address ]]
+ [[ config firewall address =~ ^description[[:space:]] ]]
+ [[ config firewall address =~ ^edit[[:space:]]+".+" ]]
+ [[ config firewall address =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ config firewall address == \n\e\x\t ]]
+ [[ config firewall address == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=edit "Wanda-Field"'
+ [[ -z edit "Wanda-Field" ]]
+ [[ edit "wanda-field" =~ ^description[[:space:]] ]]
+ [[ edit "wanda-field" =~ ^edit[[:space:]]+".+" ]]
++ sed -E 's/^edit[[:space:]]+"(.+)"$/\1/'
+ partner_value=Wanda-Field
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=set subnet 192.168.100.100 255.255.255.255'
+ [[ -z set subnet 192.168.100.100 255.255.255.255 ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 =~ ^description[[:space:]] ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 =~ ^edit[[:space:]]+".+" ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 == \n\e\x\t ]]
+ [[ set subnet 192.168.100.100 255.255.255.255 == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=set comment "Wanda’s chaos relay"'
+ [[ -z set comment "Wanda’s chaos relay" ]]
+ [[ set comment "wanda’s chaos relay" =~ ^description[[:space:]] ]]
+ [[ set comment "wanda’s chaos relay" =~ ^edit[[:space:]]+".+" ]]
+ [[ set comment "wanda’s chaos relay" =~ ^set[[:space:]]+comment[[:space:]] ]]
++ sed -E 's/^set[[:space:]]+comment[[:space:]]+//'
++ sed -E 's/^"(.*)"$/\1/'
+ description_value='Wanda’s chaos relay'
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local trimmed=next
+ [[ -z next ]]
+ [[ next =~ ^description[[:space:]] ]]
+ [[ next =~ ^edit[[:space:]]+".+" ]]
+ [[ next =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ next == \n\e\x\t ]]
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local trimmed=end
+ [[ -z end ]]
+ [[ end =~ ^description[[:space:]] ]]
+ [[ end =~ ^edit[[:space:]]+".+" ]]
+ [[ end =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ end == \n\e\x\t ]]
+ [[ end == \e\n\d ]]
+ continue
+ [[ config firewall address == \c\o\n\f\i\g\ \f\i\r\e\w\a\l\l\ \a\d\d\r\e\s\s ]]
+ data_sets=("${data_sets[@]:1}")
+ items=()
+ local -a items
+ others=()
+ local -a others
+ for line in "${data_sets[@]}"
+ grep -Eq '(^|[^0-9.])192\.168\.100\.100([^0-9.]|$)'
+ items+=("$(sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//' <<< "${line}")")
++ sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//'
++ printf '%s\n' 'set subnet 192.168.100.100 255.255.255.255'
++ jq -R .
++ jq --slurp .
+ local 'items_json=[
  "set subnet 192.168.100.100 255.255.255.255"
]'
++ printf '%s\n'
++ sed '/^[[:space:]]*$/d'
++ jq -R .
++ jq --slurp .
+ local 'others_json=[]'
+ local group_value=Unclassified
+ [[ true == true ]]
+ local object_key
++ awk '{print $NF}'
++ sed -E 's/[[:punct:]]*$//'
+ object_key=address
++ jq -r --arg key address 'map( select( .match[]? | contains( $key ) ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
++ jq -r --arg desc 'Wanda’s chaos relay' 'map( select( .match[]? == $desc ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
+ group_value=Unclassified
++ jq -n --arg object config --arg type 'firewall address' --arg partner Wanda-Field --arg description 'Wanda’s chaos relay' --argjson items '[
  "set subnet 192.168.100.100 255.255.255.255"
]' --argjson others '[]' --arg group Unclassified '{
          object: $object,
          type: ( $type // false ),
          partner: ( $partner | select(. != "" and . != "null" and . != "false") // false ),
          description: ( $description | select(. != "" and . != "null" and . != "false") // false ),
          items: $items,
          others: $others,
          group: $group
        }'
+ local 'target_json={
  "object": "config",
  "type": "firewall address",
  "partner": "Wanda-Field",
  "description": "Wanda’s chaos relay",
  "items": [
    "set subnet 192.168.100.100 255.255.255.255"
  ],
  "others": [],
  "group": "Unclassified"
}'
+ [[ true == true ]]
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ for object in "${restored_block[@]}"
+ message 'config firewall address'
+ [[ -n config firewall address ]]
+ local 'message=config firewall address'
+ echo -e 'config firewall address'
+ for object in "${restored_block[@]}"
+ message '  edit "Wanda-Field"'
+ [[ -n   edit "Wanda-Field" ]]
+ local 'message=  edit "Wanda-Field"'
+ echo -e '  edit "Wanda-Field"'
+ for object in "${restored_block[@]}"
+ message '   set subnet 192.168.100.100 255.255.255.255'
+ [[ -n    set subnet 192.168.100.100 255.255.255.255 ]]
+ local 'message=   set subnet 192.168.100.100 255.255.255.255'
+ echo -e '   set subnet 192.168.100.100 255.255.255.255'
+ for object in "${restored_block[@]}"
+ message '   set comment "Wanda’s chaos relay"'
+ [[ -n    set comment "Wanda’s chaos relay" ]]
+ local 'message=   set comment "Wanda’s chaos relay"'
+ echo -e '   set comment "Wanda’s chaos relay"'
+ for object in "${restored_block[@]}"
+ message '  next'
+ [[ -n   next ]]
+ local 'message=  next'
+ echo -e '  next'
+ for object in "${restored_block[@]}"
+ message end
+ [[ -n end ]]
+ local message=end
+ echo -e end
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ message 'JSON Object (output):'
+ [[ -n JSON Object (output): ]]
+ local 'message=JSON Object (output):'
+ echo -e 'JSON Object (output):'
+ jq -r .
+ [[ -n {
  "object": "config",
  "type": "firewall address",
  "partner": "Wanda-Field",
  "description": "Wanda’s chaos relay",
  "items": [
    "set subnet 192.168.100.100 255.255.255.255"
  ],
  "others": [],
  "group": "Unclassified"
} ]]
+ jq -r .
+ cat -n /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fg-campus-core.list.objects
     1	{
     2	  "object": "config",
     3	  "type": "firewall address",
     4	  "partner": "Vision-Link",
     5	  "description": "Vision’s quantum channel",
     6	  "items": [
     7	    "set subnet 192.168.2.12 255.255.255.255"
     8	  ],
     9	  "others": [],
    10	  "group": "Unclassified"
    11	}
    12	{
    13	  "object": "config",
    14	  "type": "firewall address",
    15	  "partner": "Cap-HQ",
    16	  "description": "Captain America’s secure endpoint",
    17	  "items": [
    18	    "set subnet 192.168.1.11 255.255.255.255"
    19	  ],
    20	  "others": [],
    21	  "group": "Unclassified"
    22	}
    23	{
    24	  "object": "config",
    25	  "type": "system interface",
    26	  "partner": "wifi",
    27	  "description": false,
    28	  "items": [
    29	    "set ip 192.168.100.100 255.255.255.0"
    30	  ],
    31	  "others": [
    32	    "set alias \"Wireless VLAN\""
    33	  ],
    34	  "group": "Unclassified"
    35	}
    36	{
    37	  "object": "config",
    38	  "type": "firewall address",
    39	  "partner": "Titan-WLAN-Host",
    40	  "description": "Guest WiFi node",
    41	  "items": [
    42	    "set subnet 192.168.100.100 255.255.255.255"
    43	  ],
    44	  "others": [],
    45	  "group": "Unclassified"
    46	}
    47	{
    48	  "object": "config",
    49	  "type": "firewall address",
    50	  "partner": "Wanda-Field",
    51	  "description": "Wanda’s chaos relay",
    52	  "items": [
    53	    "set subnet 192.168.100.100 255.255.255.255"
    54	  ],
    55	  "others": [],
    56	  "group": "Unclassified"
    57	}
+ return 0
