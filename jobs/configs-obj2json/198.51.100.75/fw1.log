+ oIFS=' 	
'
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --search=198.51.100.75
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ search =~ ^(search|s)$ ]]
+ local target_pattern=198.51.100.75
+ [[ search =~ ^(source|o)$ ]]
+ [[ search =~ ^(target|t)$ ]]
+ [[ search =~ ^(logger|l)$ ]]
+ [[ search == \d\e\b\u\g ]]
+ [[ search == \d\r\y\-\r\u\n ]]
+ [[ search == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e '--source=object-group network Krypton-Cloud--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  description Cloud-facing external nodes--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  network-object host 198.51.100.75--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  network-object host 203.0.113.25'
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ source =~ ^(search|s)$ ]]
+ [[ source =~ ^(source|o)$ ]]
+ local 'source_object=object-group network Krypton-Cloud--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  description Cloud-facing external nodes--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  network-object host 198.51.100.75--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  network-object host 203.0.113.25'
+ [[ source =~ ^(target|t)$ ]]
+ [[ source =~ ^(logger|l)$ ]]
+ [[ source == \d\e\b\u\g ]]
+ [[ source == \d\r\y\-\r\u\n ]]
+ [[ source == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --target=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fw1.list.objects
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ target =~ ^(search|s)$ ]]
+ [[ target =~ ^(source|o)$ ]]
+ [[ target =~ ^(target|t)$ ]]
+ local target_object=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fw1.list.objects
+ [[ target =~ ^(logger|l)$ ]]
+ [[ target == \d\e\b\u\g ]]
+ [[ target == \d\r\y\-\r\u\n ]]
+ [[ target == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --logger=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--198.51.100.75--misc--fw1.console
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ logger =~ ^(search|s)$ ]]
+ [[ logger =~ ^(source|o)$ ]]
+ [[ logger =~ ^(target|t)$ ]]
+ [[ logger =~ ^(logger|l)$ ]]
+ local target_console=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--198.51.100.75--misc--fw1.console
+ [[ logger == \d\e\b\u\g ]]
+ [[ logger == \d\r\y\-\r\u\n ]]
+ [[ logger == \v\e\r\b\o\s\e ]]
+ IFS=' 	
'
+ [[ -z true ]]
+ [[ -z false ]]
+ [[ -z true ]]
+ local target_console=console/configs-obj2json.console
+ mapfile -t restored_block
++ printf '%s\n' 'object-group network Krypton-Cloud
  description Cloud-facing external nodes
  network-object host 198.51.100.75
  network-object host 203.0.113.25'
+ local 'object_header=object-group network Krypton-Cloud'
+ local object_keyword type_value partner_value
+ read -a header_tokens
+ object_keyword=object-group
+ [[ object-group == \c\o\n\f\i\g ]]
+ ((  3 == 3  ))
+ type_value=network
+ partner_value=Krypton-Cloud
+ data_sets=()
+ local -a data_sets
+ local description_value=false
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=object-group network Krypton-Cloud'
+ [[ -z object-group network Krypton-Cloud ]]
+ [[ object-group network krypton-cloud =~ ^description[[:space:]] ]]
+ [[ object-group network krypton-cloud =~ ^edit[[:space:]]+".+" ]]
+ [[ object-group network krypton-cloud =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ object-group network krypton-cloud == \n\e\x\t ]]
+ [[ object-group network krypton-cloud == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=description Cloud-facing external nodes'
+ [[ -z description Cloud-facing external nodes ]]
+ [[ description cloud-facing external nodes =~ ^description[[:space:]] ]]
++ sed -E 's/^description[[:space:]]+//'
+ description_value='Cloud-facing external nodes'
+ continue
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=network-object host 198.51.100.75'
+ [[ -z network-object host 198.51.100.75 ]]
+ [[ network-object host 198.51.100.75 =~ ^description[[:space:]] ]]
+ [[ network-object host 198.51.100.75 =~ ^edit[[:space:]]+".+" ]]
+ [[ network-object host 198.51.100.75 =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ network-object host 198.51.100.75 == \n\e\x\t ]]
+ [[ network-object host 198.51.100.75 == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=network-object host 203.0.113.25'
+ [[ -z network-object host 203.0.113.25 ]]
+ [[ network-object host 203.0.113.25 =~ ^description[[:space:]] ]]
+ [[ network-object host 203.0.113.25 =~ ^edit[[:space:]]+".+" ]]
+ [[ network-object host 203.0.113.25 =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ network-object host 203.0.113.25 == \n\e\x\t ]]
+ [[ network-object host 203.0.113.25 == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ [[ object-group network Krypton-Cloud == \o\b\j\e\c\t\-\g\r\o\u\p\ \n\e\t\w\o\r\k\ \K\r\y\p\t\o\n\-\C\l\o\u\d ]]
+ data_sets=("${data_sets[@]:1}")
+ items=()
+ local -a items
+ others=()
+ local -a others
+ for line in "${data_sets[@]}"
+ grep -Eq '(^|[^0-9.])198\.51\.100\.75([^0-9.]|$)'
+ items+=("$(sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//' <<< "${line}")")
++ sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//'
+ for line in "${data_sets[@]}"
+ grep -Eq '(^|[^0-9.])198\.51\.100\.75([^0-9.]|$)'
+ others+=("$(sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//' <<< "${line}")")
++ sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//'
++ printf '%s\n' 'network-object host 198.51.100.75'
++ jq -R .
++ jq --slurp .
+ local 'items_json=[
  "network-object host 198.51.100.75"
]'
++ printf '%s\n' 'network-object host 203.0.113.25'
++ sed '/^[[:space:]]*$/d'
++ jq -R .
++ jq --slurp .
+ local 'others_json=[
  "network-object host 203.0.113.25"
]'
+ local group_value=Unclassified
+ [[ true == true ]]
+ local object_key
++ awk '{print $NF}'
++ sed -E 's/[[:punct:]]*$//'
+ object_key=network
++ jq -r --arg key network 'map( select( .match[]? | contains( $key ) ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
++ jq -r --arg desc 'Cloud-facing external nodes' 'map( select( .match[]? == $desc ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
+ group_value=Unclassified
++ jq -n --arg object object-group --arg type network --arg partner Krypton-Cloud --arg description 'Cloud-facing external nodes' --argjson items '[
  "network-object host 198.51.100.75"
]' --argjson others '[
  "network-object host 203.0.113.25"
]' --arg group Unclassified '{
          object: $object,
          type: ( $type // false ),
          partner: ( $partner | select(. != "" and . != "null" and . != "false") // false ),
          description: ( $description | select(. != "" and . != "null" and . != "false") // false ),
          items: $items,
          others: $others,
          group: $group
        }'
+ local 'target_json={
  "object": "object-group",
  "type": "network",
  "partner": "Krypton-Cloud",
  "description": "Cloud-facing external nodes",
  "items": [
    "network-object host 198.51.100.75"
  ],
  "others": [
    "network-object host 203.0.113.25"
  ],
  "group": "Unclassified"
}'
+ [[ true == true ]]
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ for object in "${restored_block[@]}"
+ message 'object-group network Krypton-Cloud'
+ [[ -n object-group network Krypton-Cloud ]]
+ local 'message=object-group network Krypton-Cloud'
+ echo -e 'object-group network Krypton-Cloud'
+ for object in "${restored_block[@]}"
+ message '  description Cloud-facing external nodes'
+ [[ -n   description Cloud-facing external nodes ]]
+ local 'message=  description Cloud-facing external nodes'
+ echo -e '  description Cloud-facing external nodes'
+ for object in "${restored_block[@]}"
+ message '  network-object host 198.51.100.75'
+ [[ -n   network-object host 198.51.100.75 ]]
+ local 'message=  network-object host 198.51.100.75'
+ echo -e '  network-object host 198.51.100.75'
+ for object in "${restored_block[@]}"
+ message '  network-object host 203.0.113.25'
+ [[ -n   network-object host 203.0.113.25 ]]
+ local 'message=  network-object host 203.0.113.25'
+ echo -e '  network-object host 203.0.113.25'
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ message 'JSON Object (output):'
+ [[ -n JSON Object (output): ]]
+ local 'message=JSON Object (output):'
+ echo -e 'JSON Object (output):'
+ jq -r .
+ [[ -n {
  "object": "object-group",
  "type": "network",
  "partner": "Krypton-Cloud",
  "description": "Cloud-facing external nodes",
  "items": [
    "network-object host 198.51.100.75"
  ],
  "others": [
    "network-object host 203.0.113.25"
  ],
  "group": "Unclassified"
} ]]
+ jq -r .
+ cat -n /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fw1.list.objects
     1	{
     2	  "object": "object-group",
     3	  "type": "network",
     4	  "partner": "Fortress-Wireless",
     5	  "description": "Secure wireless access layer",
     6	  "items": [
     7	    "network-object host 192.168.1.10"
     8	  ],
     9	  "others": [
    10	    "network-object host 172.18.1.20"
    11	  ],
    12	  "group": "Unclassified"
    13	}
    14	{
    15	  "object": "object-group",
    16	  "type": "network",
    17	  "partner": "Krypton-Cloud",
    18	  "description": "Cloud-facing external nodes",
    19	  "items": [
    20	    "network-object host 198.51.100.75"
    21	  ],
    22	  "others": [
    23	    "network-object host 203.0.113.25"
    24	  ],
    25	  "group": "Unclassified"
    26	}
    27	{
    28	  "object": "object-group",
    29	  "type": "network",
    30	  "partner": "Metropolis-Internal",
    31	  "description": "Core internal LAN for application clusters",
    32	  "items": [
    33	    "network-object host 192.168.2.12"
    34	  ],
    35	  "others": [
    36	    "network-object host 10.0.2.3",
    37	    "network-object 192.168.2.0 255.255.255.0"
    38	  ],
    39	  "group": "Unclassified"
    40	}
+ return 0
+ oIFS=' 	
'
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --search=198.51.100.75
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ search =~ ^(search|s)$ ]]
+ local target_pattern=198.51.100.75
+ [[ search =~ ^(source|o)$ ]]
+ [[ search =~ ^(target|t)$ ]]
+ [[ search =~ ^(logger|l)$ ]]
+ [[ search == \d\e\b\u\g ]]
+ [[ search == \d\r\y\-\r\u\n ]]
+ [[ search == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e '--source=object network External-Failover--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  host 198.51.100.75--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  description Secondary outbound route for edge'
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ source =~ ^(search|s)$ ]]
+ [[ source =~ ^(source|o)$ ]]
+ local 'source_object=object network External-Failover--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  host 198.51.100.75--ZGV2b3BzLXJlc291cmNlcy5zaGVsbA--  description Secondary outbound route for edge'
+ [[ source =~ ^(target|t)$ ]]
+ [[ source =~ ^(logger|l)$ ]]
+ [[ source == \d\e\b\u\g ]]
+ [[ source == \d\r\y\-\r\u\n ]]
+ [[ source == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --target=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fw1.list.objects
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ target =~ ^(search|s)$ ]]
+ [[ target =~ ^(source|o)$ ]]
+ [[ target =~ ^(target|t)$ ]]
+ local target_object=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fw1.list.objects
+ [[ target =~ ^(logger|l)$ ]]
+ [[ target == \d\e\b\u\g ]]
+ [[ target == \d\r\y\-\r\u\n ]]
+ [[ target == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --logger=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--198.51.100.75--misc--fw1.console
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ logger =~ ^(search|s)$ ]]
+ [[ logger =~ ^(source|o)$ ]]
+ [[ logger =~ ^(target|t)$ ]]
+ [[ logger =~ ^(logger|l)$ ]]
+ local target_console=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/configs-obj2json--198.51.100.75--misc--fw1.console
+ [[ logger == \d\e\b\u\g ]]
+ [[ logger == \d\r\y\-\r\u\n ]]
+ [[ logger == \v\e\r\b\o\s\e ]]
+ IFS=' 	
'
+ [[ -z true ]]
+ [[ -z false ]]
+ [[ -z true ]]
+ local target_console=console/configs-obj2json.console
+ mapfile -t restored_block
++ printf '%s\n' 'object network External-Failover
  host 198.51.100.75
  description Secondary outbound route for edge'
+ local 'object_header=object network External-Failover'
+ local object_keyword type_value partner_value
+ read -a header_tokens
+ object_keyword=object
+ [[ object == \c\o\n\f\i\g ]]
+ ((  3 == 3  ))
+ type_value=network
+ partner_value=External-Failover
+ data_sets=()
+ local -a data_sets
+ local description_value=false
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=object network External-Failover'
+ [[ -z object network External-Failover ]]
+ [[ object network external-failover =~ ^description[[:space:]] ]]
+ [[ object network external-failover =~ ^edit[[:space:]]+".+" ]]
+ [[ object network external-failover =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ object network external-failover == \n\e\x\t ]]
+ [[ object network external-failover == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=host 198.51.100.75'
+ [[ -z host 198.51.100.75 ]]
+ [[ host 198.51.100.75 =~ ^description[[:space:]] ]]
+ [[ host 198.51.100.75 =~ ^edit[[:space:]]+".+" ]]
+ [[ host 198.51.100.75 =~ ^set[[:space:]]+comment[[:space:]] ]]
+ [[ host 198.51.100.75 == \n\e\x\t ]]
+ [[ host 198.51.100.75 == \e\n\d ]]
+ data_sets+=("${trimmed}")
+ for line in "${restored_block[@]}"
++ sed -E 's/^[[:space:]]*//;s/[[:space:]]*$//'
+ local 'trimmed=description Secondary outbound route for edge'
+ [[ -z description Secondary outbound route for edge ]]
+ [[ description secondary outbound route for edge =~ ^description[[:space:]] ]]
++ sed -E 's/^description[[:space:]]+//'
+ description_value='Secondary outbound route for edge'
+ continue
+ [[ object network External-Failover == \o\b\j\e\c\t\ \n\e\t\w\o\r\k\ \E\x\t\e\r\n\a\l\-\F\a\i\l\o\v\e\r ]]
+ data_sets=("${data_sets[@]:1}")
+ items=()
+ local -a items
+ others=()
+ local -a others
+ for line in "${data_sets[@]}"
+ grep -Eq '(^|[^0-9.])198\.51\.100\.75([^0-9.]|$)'
+ items+=("$(sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//' <<< "${line}")")
++ sed -E 's/^[[:space:]]+//;s/[[:space:]]+$//'
++ printf '%s\n' 'host 198.51.100.75'
++ jq -R .
++ jq --slurp .
+ local 'items_json=[
  "host 198.51.100.75"
]'
++ printf '%s\n'
++ sed '/^[[:space:]]*$/d'
++ jq -R .
++ jq --slurp .
+ local 'others_json=[]'
+ local group_value=Unclassified
+ [[ true == true ]]
+ local object_key
++ awk '{print $NF}'
++ sed -E 's/[[:punct:]]*$//'
+ object_key=network
++ jq -r --arg key network 'map( select( .match[]? | contains( $key ) ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
++ jq -r --arg desc 'Secondary outbound route for edge' 'map( select( .match[]? == $desc ) ) | .[0].group'
+ group_value=null
+ [[ -z null ]]
+ [[ null == \n\u\l\l ]]
+ group_value=Unclassified
++ jq -n --arg object object --arg type network --arg partner External-Failover --arg description 'Secondary outbound route for edge' --argjson items '[
  "host 198.51.100.75"
]' --argjson others '[]' --arg group Unclassified '{
          object: $object,
          type: ( $type // false ),
          partner: ( $partner | select(. != "" and . != "null" and . != "false") // false ),
          description: ( $description | select(. != "" and . != "null" and . != "false") // false ),
          items: $items,
          others: $others,
          group: $group
        }'
+ local 'target_json={
  "object": "object",
  "type": "network",
  "partner": "External-Failover",
  "description": "Secondary outbound route for edge",
  "items": [
    "host 198.51.100.75"
  ],
  "others": [],
  "group": "Unclassified"
}'
+ [[ true == true ]]
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ for object in "${restored_block[@]}"
+ message 'object network External-Failover'
+ [[ -n object network External-Failover ]]
+ local 'message=object network External-Failover'
+ echo -e 'object network External-Failover'
+ for object in "${restored_block[@]}"
+ message '  host 198.51.100.75'
+ [[ -n   host 198.51.100.75 ]]
+ local 'message=  host 198.51.100.75'
+ echo -e '  host 198.51.100.75'
+ for object in "${restored_block[@]}"
+ message '  description Secondary outbound route for edge'
+ [[ -n   description Secondary outbound route for edge ]]
+ local 'message=  description Secondary outbound route for edge'
+ echo -e '  description Secondary outbound route for edge'
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo
+ (( i++ ))
+ (( i < count ))
+ message 'JSON Object (output):'
+ [[ -n JSON Object (output): ]]
+ local 'message=JSON Object (output):'
+ echo -e 'JSON Object (output):'
+ jq -r .
+ [[ -n {
  "object": "object",
  "type": "network",
  "partner": "External-Failover",
  "description": "Secondary outbound route for edge",
  "items": [
    "host 198.51.100.75"
  ],
  "others": [],
  "group": "Unclassified"
} ]]
+ jq -r .
+ cat -n /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.CiEK7yRWrn/fw1.list.objects
     1	{
     2	  "object": "object-group",
     3	  "type": "network",
     4	  "partner": "Fortress-Wireless",
     5	  "description": "Secure wireless access layer",
     6	  "items": [
     7	    "network-object host 192.168.1.10"
     8	  ],
     9	  "others": [
    10	    "network-object host 172.18.1.20"
    11	  ],
    12	  "group": "Unclassified"
    13	}
    14	{
    15	  "object": "object-group",
    16	  "type": "network",
    17	  "partner": "Krypton-Cloud",
    18	  "description": "Cloud-facing external nodes",
    19	  "items": [
    20	    "network-object host 198.51.100.75"
    21	  ],
    22	  "others": [
    23	    "network-object host 203.0.113.25"
    24	  ],
    25	  "group": "Unclassified"
    26	}
    27	{
    28	  "object": "object-group",
    29	  "type": "network",
    30	  "partner": "Metropolis-Internal",
    31	  "description": "Core internal LAN for application clusters",
    32	  "items": [
    33	    "network-object host 192.168.2.12"
    34	  ],
    35	  "others": [
    36	    "network-object host 10.0.2.3",
    37	    "network-object 192.168.2.0 255.255.255.0"
    38	  ],
    39	  "group": "Unclassified"
    40	}
    41	{
    42	  "object": "object-group",
    43	  "type": "network",
    44	  "partner": "Krypton-Cloud",
    45	  "description": "Cloud-facing external nodes",
    46	  "items": [
    47	    "network-object host 203.0.113.25"
    48	  ],
    49	  "others": [
    50	    "network-object host 198.51.100.75"
    51	  ],
    52	  "group": "Unclassified"
    53	}
    54	{
    55	  "object": "object",
    56	  "type": "network",
    57	  "partner": "External-Failover",
    58	  "description": "Secondary outbound route for edge",
    59	  "items": [
    60	    "host 198.51.100.75"
    61	  ],
    62	  "others": [],
    63	  "group": "Unclassified"
    64	}
+ return 0
