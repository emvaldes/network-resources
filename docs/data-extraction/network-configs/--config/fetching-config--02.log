$ bash -x scripts/network-configs.shell \
          --ip-addr="192.168.1.10,203.0.113.25" \
          --config=./configs/fortinet/fg-lab-test-fw.cfg \
          --output=./resources/fg-lab-test-fw.cfg \
          --verbose ;

+ set -euo pipefail
+ export LC_ALL=C
+ LC_ALL=C
++ mktemp -d
+ export TMP_DIR=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.wX5AK6oLET
+ TMP_DIR=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.wX5AK6oLET
+ trap '[[ -d "${TMP_DIR}" ]] && rm -rf "${TMP_DIR}"' EXIT
+ export 'nl=\n'
+ nl='\n'
+ alias display-help=display_help
+ alias new-line=newline
+ alias print-message=message
+ alias detect-vendor=detect_vendor
+ alias parse-cisco=main
+ [[ -z '' ]]
+ export script_name=scripts/network-configs.shell
+ script_name=scripts/network-configs.shell
+ [[ 4 -ge 1 ]]
+ [[ --ip-addr=192.168.1.10,203.0.113.25 =~ ^-*(h|help)$ ]]
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo

+ (( i++ ))
+ (( i < count ))
+ main --ip-addr=192.168.1.10,203.0.113.25 --config=./configs/fortinet/fg-lab-test-fw.cfg --output=./resources/fg-lab-test-fw.cfg --verbose
+ oIFS=' 	
'
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --ip-addr=192.168.1.10,203.0.113.25
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ ip-addr =~ ^(ip-addr|i)$ ]]
+ local search_pattern=192.168.1.10,203.0.113.25
+ [[ ip-addr =~ ^(config|c)$ ]]
+ [[ ip-addr =~ ^(search|s)$ ]]
+ [[ ip-addr =~ ^(location|l)$ ]]
+ [[ ip-addr =~ ^(output|o)$ ]]
+ [[ ip-addr == \h\e\l\p ]]
+ [[ ip-addr == \d\e\b\u\g ]]
+ [[ ip-addr == \d\r\y\-\r\u\n ]]
+ [[ ip-addr == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --config=./configs/fortinet/fg-lab-test-fw.cfg
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ config =~ ^(ip-addr|i)$ ]]
+ [[ config =~ ^(config|c)$ ]]
+ local source_config=./configs/fortinet/fg-lab-test-fw.cfg
+ [[ config =~ ^(search|s)$ ]]
+ [[ config =~ ^(location|l)$ ]]
+ [[ config =~ ^(output|o)$ ]]
+ [[ config == \h\e\l\p ]]
+ [[ config == \d\e\b\u\g ]]
+ [[ config == \d\r\y\-\r\u\n ]]
+ [[ config == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --output=./resources/fg-lab-test-fw.cfg
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ output =~ ^(ip-addr|i)$ ]]
+ [[ output =~ ^(config|c)$ ]]
+ [[ output =~ ^(search|s)$ ]]
+ [[ output =~ ^(location|l)$ ]]
+ [[ output =~ ^(output|o)$ ]]
+ local output_config=./resources/fg-lab-test-fw.cfg
+ [[ output == \h\e\l\p ]]
+ [[ output == \d\e\b\u\g ]]
+ [[ output == \d\r\y\-\r\u\n ]]
+ [[ output == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --verbose
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ verbose =~ ^(ip-addr|i)$ ]]
+ [[ verbose =~ ^(config|c)$ ]]
+ [[ verbose =~ ^(search|s)$ ]]
+ [[ verbose =~ ^(location|l)$ ]]
+ [[ verbose =~ ^(output|o)$ ]]
+ [[ verbose == \h\e\l\p ]]
+ [[ verbose == \d\e\b\u\g ]]
+ [[ verbose == \d\r\y\-\r\u\n ]]
+ [[ verbose == \v\e\r\b\o\s\e ]]
+ local verbose=true
+ IFS=' 	
'
+ [[ -z '' ]]
+ local script_helper=false
+ [[ -z ./resources/fg-lab-test-fw.cfg ]]
+ [[ -z '' ]]
+ debug=false
+ [[ -z '' ]]
+ dry_run=false
+ [[ -z true ]]
+ [[ false == true ]]
+ configs_listing=()
+ declare -a configs_listing
+ local action_class=unknown
+ [[ -n ./configs/fortinet/fg-lab-test-fw.cfg ]]
+ [[ -f ./configs/fortinet/fg-lab-test-fw.cfg ]]
+ configs_listing=("${source_config}")
+ action_class=config
+ [[ -z '' ]]
+ [[ -n '' ]]
+ [[ -z '' ]]
+ [[ -z ./configs/fortinet/fg-lab-test-fw.cfg ]]
+ [[ -z 192.168.1.10,203.0.113.25 ]]
+ [[ -n '' ]]
+ [[ 1 -eq 0 ]]
+ [[ -n '' ]]
+ [[ -n '' ]]
+ [[ 1 -eq 0 ]]
+ for source_config in "${configs_listing[@]}"
+ [[ ! -f ./configs/fortinet/fg-lab-test-fw.cfg ]]
+ set +e
+ detect_vendor ./configs/fortinet/fg-lab-test-fw.cfg
+ local config_file=./configs/fortinet/fg-lab-test-fw.cfg
+ local 'fortinet_pattern=fortinet|fortigate'
+ local 'cisco_pattern=\basa\b|cisco ios|cisco adaptive|^interface\b|^object\b'
+ grep -qiE 'fortinet|fortigate' ./configs/fortinet/fg-lab-test-fw.cfg
+ return 1
+ local vendor_code=1
+ set -e
+ case "${vendor_code}" in
+ target_platform=fortinet
+ message 'Parsing [ fortinet ] configs (by: config): '
+ [[ -n Parsing [ fortinet ] configs (by: config):  ]]
+ local 'message=Parsing [ fortinet ] configs (by: config): '
+ echo -e 'Parsing [ fortinet ] configs (by: config): '
Parsing [ fortinet ] configs (by: config): 
+ [[ -n ./resources/fg-lab-test-fw.cfg ]]
+ base_output=./resources/fg-lab-test-fw.cfg
++ echo ./configs/fortinet/fg-lab-test-fw.cfg
++ sed 's|^\./||'
+ rel_path=configs/fortinet/fg-lab-test-fw.cfg
+ target_output=./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg
++ dirname ./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg
+ local output_dir=./resources/fg-lab-test-fw.cfg/configs/fortinet
+ [[ ! -d ./resources/fg-lab-test-fw.cfg/configs/fortinet ]]
+ mkdir -p ./resources/fg-lab-test-fw.cfg/configs/fortinet
+ execute=('./scripts/extract-configs.shell' '--ip-addr=192.168.1.10,203.0.113.25' '--config=./configs/fortinet/fg-lab-test-fw.cfg' '--output=./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg')
+ declare -a execute
+ [[ true == true ]]
+ execute+=(--verbose)
++ which bash
+ /usr/local/bin/bash ./scripts/extract-configs.shell --ip-addr=192.168.1.10,203.0.113.25 --config=./configs/fortinet/fg-lab-test-fw.cfg --output=./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg --verbose
+ [[ true == true ]]
+ message 'Configuration File [ ./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg ]'
+ [[ -n Configuration File [ ./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg ] ]]
+ local 'message=Configuration File [ ./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg ]'
+ echo -e 'Configuration File [ ./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg ]'
Configuration File [ ./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg ]
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo

+ (( i++ ))
+ (( i < count ))
+ cat -n ./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg
     1	#hostname="fg-lab-test-fw"
     2	#model="FortiGate-40F"
     3	
     4	config firewall address
     5	 edit "Panther-Vault"
     6	  set subnet 192.168.1.10 255.255.255.255
     7	  set comment "Wakandan data store"
     8	 next
     9	 edit "Public-Test"
    10	  set subnet 203.0.113.25 255.255.255.255
    11	  set comment "Public NAT exposure for Red Skull trap"
    12	 next
    13	end
    14	
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo

+ (( i++ ))
+ (( i < count ))
+ tree ./resources/fg-lab-test-fw.cfg
./resources/fg-lab-test-fw.cfg
`-- configs
    `-- fortinet
        `-- fg-lab-test-fw.cfg

3 directories, 1 file
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo

+ (( i++ ))
+ (( i < count ))
+ return 0
+ result=0
+ exit 0
+ [[ -d /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.wX5AK6oLET ]]
+ rm -rf /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.wX5AK6oLET

$ bash scripts/network-configs.shell \
       --ip-addr="192.168.1.10,203.0.113.25" \
       --config=./configs/fortinet/fg-lab-test-fw.cfg \
       --output=./resources/fg-lab-test-fw.cfg \
       --verbose ;

Parsing [ fortinet ] configs (by: config): 
Configuration File [ ./resources/fg-lab-test-fw.cfg/configs/fortinet/fg-lab-test-fw.cfg ]

     1	#hostname="fg-lab-test-fw"
     2	#model="FortiGate-40F"
     3	
     4	config firewall address
     5	 edit "Panther-Vault"
     6	  set subnet 192.168.1.10 255.255.255.255
     7	  set comment "Wakandan data store"
     8	 next
     9	 edit "Public-Test"
    10	  set subnet 203.0.113.25 255.255.255.255
    11	  set comment "Public NAT exposure for Red Skull trap"
    12	 next
    13	end
    14	

./resources/fg-lab-test-fw.cfg
`-- configs
    `-- fortinet
        `-- fg-lab-test-fw.cfg

3 directories, 1 file
