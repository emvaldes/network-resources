$ bash -x scripts/network-configs.shell --ip-addr="10.0.2.3,172.16.1.6" \
                                        --config=./configs/cisco/branch-isr-02.cfg \
                                        --output=./branch-isr-02-multi.cfg --verbose ;

  + set -euo pipefail
+ export LC_ALL=C
+ LC_ALL=C
++ mktemp -d
+ export TMP_DIR=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.A35gIKNRAf
+ TMP_DIR=/var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.A35gIKNRAf
+ trap '[[ -d "${TMP_DIR}" ]] && rm -rf "${TMP_DIR}"' EXIT
+ export 'nl=\n'
+ nl='\n'
+ alias display-help=display_help
+ alias new-line=newline
+ alias print-message=message
+ alias detect-vendor=detect_vendor
+ alias parse-cisco=main
+ [[ -z '' ]]
+ export script_name=scripts/network-configs.shell
+ script_name=scripts/network-configs.shell
+ [[ 4 -ge 1 ]]
+ [[ --ip-addr=10.0.2.3,172.16.1.6 =~ ^-*(h|help)$ ]]
+ main --ip-addr=10.0.2.3,172.16.1.6 --config=./configs/cisco/branch-isr-02.cfg --output=./branch-isr-02-multi.cfg --verbose
+ oIFS='
'
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --ip-addr=10.0.2.3,172.16.1.6
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ ip-addr =~ ^(ip-addr|i)$ ]]
+ export search_pattern=10.0.2.3,172.16.1.6
+ search_pattern=10.0.2.3,172.16.1.6
+ [[ ip-addr =~ ^(config|c)$ ]]
+ [[ ip-addr =~ ^(output|o)$ ]]
+ [[ ip-addr == \h\e\l\p ]]
+ [[ ip-addr == \d\e\b\u\g ]]
+ [[ ip-addr == \d\r\y\-\r\u\n ]]
+ [[ ip-addr == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --config=./configs/cisco/branch-isr-02.cfg
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ config =~ ^(ip-addr|i)$ ]]
+ [[ config =~ ^(config|c)$ ]]
+ export source_config=./configs/cisco/branch-isr-02.cfg
+ source_config=./configs/cisco/branch-isr-02.cfg
+ [[ config =~ ^(output|o)$ ]]
+ [[ config == \h\e\l\p ]]
+ [[ config == \d\e\b\u\g ]]
+ [[ config == \d\r\y\-\r\u\n ]]
+ [[ config == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --output=./branch-isr-02-multi.cfg
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ output =~ ^(ip-addr|i)$ ]]
+ [[ output =~ ^(config|c)$ ]]
+ [[ output =~ ^(output|o)$ ]]
+ export output_config=./branch-isr-02-multi.cfg
+ output_config=./branch-isr-02-multi.cfg
+ [[ output == \h\e\l\p ]]
+ [[ output == \d\e\b\u\g ]]
+ [[ output == \d\r\y\-\r\u\n ]]
+ [[ output == \v\e\r\b\o\s\e ]]
+ for xitem in "${@}"
+ IFS==
+ read -r key value
++ echo -e --verbose
++ sed -e '1s|^\(-\)\{1,\}||'
+ [[ verbose =~ ^(ip-addr|i)$ ]]
+ [[ verbose =~ ^(config|c)$ ]]
+ [[ verbose =~ ^(output|o)$ ]]
+ [[ verbose == \h\e\l\p ]]
+ [[ verbose == \d\e\b\u\g ]]
+ [[ verbose == \d\r\y\-\r\u\n ]]
+ [[ verbose == \v\e\r\b\o\s\e ]]
+ local verbose=true
+ IFS='
'
+ [[ -z '' ]]
+ script_helper=false
+ [[ -z '' ]]
+ debug=false
+ [[ -z '' ]]
+ dry_run=false
+ [[ -z true ]]
+ [[ false == true ]]
+ configs_listing=()
+ declare -a configs_listing
+ [[ -z 10.0.2.3,172.16.1.6 ]]
+ [[ -z ./configs/cisco/branch-isr-02.cfg ]]
+ [[ ! -f ./configs/cisco/branch-isr-02.cfg ]]
+ configs_listing=("${source_config}")
+ for source_config in "${configs_listing[@]}"
+ [[ ! -f ./configs/cisco/branch-isr-02.cfg ]]
+ set +e
+ detect_vendor ./configs/cisco/branch-isr-02.cfg
+ local config_file=./configs/cisco/branch-isr-02.cfg
+ local 'fortinet_pattern=fortinet|fortigate'
+ local 'cisco_pattern=\basa\b|cisco ios|cisco adaptive|^interface\b|^object\b'
+ grep -qiE 'fortinet|fortigate' ./configs/cisco/branch-isr-02.cfg
+ grep -qiE '\basa\b|cisco ios|cisco adaptive|^interface\b|^object\b' ./configs/cisco/branch-isr-02.cfg
+ return 2
+ local vendor_code=2
+ set -e
+ case "${vendor_code}" in
+ target_platform=cisco
+ [[ -n ./branch-isr-02-multi.cfg ]]
++ dirname ./branch-isr-02-multi.cfg
+ local output_dir=.
+ [[ ! -d . ]]
+ execute=('./scripts/extract-configs.shell' '--ip-addr=10.0.2.3,172.16.1.6' '--config=./configs/cisco/branch-isr-02.cfg' '--output=./branch-isr-02-multi.cfg')
+ declare -a execute
+ [[ true == true ]]
+ execute+=(--verbose)
++ which bash
+ /usr/local/bin/bash ./scripts/extract-configs.shell --ip-addr=10.0.2.3,172.16.1.6 --config=./configs/cisco/branch-isr-02.cfg --output=./branch-isr-02-multi.cfg --verbose
+ [[ true == true ]]
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo

+ (( i++ ))
+ (( i < count ))
+ cat -n ./branch-isr-02-multi.cfg
     1	hostname branch-isr-02
     2
     3	interface GigabitEthernet0/0/0
     4	 ip address 172.16.1.6 255.255.255.0
     5	 description ISP uplink
     6
     7	interface GigabitEthernet0/0/2
     8	 ip address 10.0.2.3 255.255.255.0
     9	 description Dev VLAN
    10
    11	object network BlackWidow-Core
    12	 host 172.16.1.6
    13	 description Branch router uplink NAT
    14
    15	object network Panther-Gateway
    16	 host 10.0.2.3
    17	 description Secure outbound concentrator
    18
    19	access-list OUTSIDE extended permit ip host 10.0.2.3 any
    20
    21	access-list OUTSIDE extended permit ip any host 172.16.1.6+ newline 2
+ local count=2
+ (( i = 0 ))
+ (( i < count ))
+ echo

+ (( i++ ))
+ (( i < count ))
+ echo

+ (( i++ ))
+ (( i < count ))
+ ls -al ./branch-isr-02-multi.cfg
-rw-r--r--@ 1 emvaldes  staff  498 May 23 22:43 ./branch-isr-02-multi.cfg
+ newline
+ local count=1
+ (( i = 0 ))
+ (( i < count ))
+ echo

+ (( i++ ))
+ (( i < count ))
+ return 0
+ result=0
+ exit 0
+ [[ -d /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.A35gIKNRAf ]]
+ rm -rf /var/folders/vp/4k9xy96d7zx8lhmgrr4khsj80000gn/T/tmp.A35gIKNRAf
